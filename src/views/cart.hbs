<!-- {{!-- Manually include script tag --}}
<script src="../config/payment.js"></script> -->
<section class="h-100">
  <div class="container py-5">
    <div class="row d-flex justify-content-center my-4">
      <div class="col-md-8">
        <div class="card mb-4">
          <div class="card-header py-3">
            <h5 class="mb-0">Shopping Cart</h5>
          </div>
          <div class="card-body">
            <!-- Single item -->
            {{#each products}}
            <div class="row">
              <div class="col-lg-3 col-md-12 mb-4 mb-lg-0">

              <div class="col-lg-5 col-md-6 mb-4 mb-lg-0">
                <!-- Data -->
                <p><strong>{{name}}</strong></p>
                
                <p>{{itemNumber}}</p>
                <!-- Data -->
              </div>
                <!-- Price -->
                <p class="text-start text-md-center">
                  <strong>{{price}}</strong>
                </p>
                <!-- Price -->
              </div>
            </div>
            {{else}}
        <div class="card mx-auto center">
            <div class="card-body">
                <h1>Welcome back </h1>
                <p class="lead" align="center">There are not products yet...</p>
                <a href="/notes/add" class="btn btn-success btn-block"><p align="center"><Create one!  <i class="fa-solid fa-wand-magic-sparkles"></i></<p></a>
            </div>
        </div>
     {{/each}}   
        <div class="row">
  <div class="col-md-8 mb-4">
    <div class="card mb-4">
      <div class="card-header py-3">
        <h5 class="mb-0">Shipping details</h5>
      </div>
      <div class="card-body">
        <form action="" method="">
            <!-- 2 column grid layout with text inputs for the first and last names -->
          <div class="row mb-4">
            <div class="col">
              <div class="form-outline">
                <input type="text" id="first-name" class="form-control" value="John"/>
                <label class="form-label" for="form7Example1">First name</label>
              </div>
            </div>
            <div class="col">
              <div class="form-outline">
                <input type="text" id="last-name" class="form-control" value="Doe"/>
                <label class="form-label" for="form7Example2">Last name</label>
              </div>
            </div>
          </div>

          <!-- Email input -->
          <div class="form-outline mb-4">
            <input type="email" id="email" class="form-control" value="sb-kmvjp25512135@personal.example.com"/>
            <label class="form-label" for="form7Example5">Email</label>
          </div>

          <!-- Number input -->
          <div class="form-outline mb-4">
            <input type="tel" id="phone" class="form-control" value="4089397780"/>
            <label class="form-label" for="form7Example6">Phone</label>
          </div>

          <div class="row mb-4">
            <div class="col">
              <div class="form-outline">
                <input type="text" name="zip" id="zip" class="form-control" value="93043"/>
                <label class="form-label" for="form7Example1">Zip</label>
              </div>
            </div>
            <div class="col">
              <div class="form-outline">
                <input type="text" name="street" id="street" class="form-control" value="151 W 34th St."/>
                <label class="form-label" for="form7Example2">Street</label>
              </div>
            </div>
          </div>
          <div class="col">
              <div class="form-outline">
                <input type="text" name="city" id="city" class="form-control" value="New York"/>
                <label class="form-label" for="form7Example3">City</label>
              </div>
            </div>
          </div>
           <!-- Text input -->
          <div class="form-outline mb-4">
            <fieldset disabled="disabled">
              <input class="form-control" id="country" type="text" disabled="" value="US">
              <label class="form-label" for="disabledInput">Country</label>
            </fieldset>
          </div>

          <!-- Text input -->
          <div class="form-outline mb-4">
            <select class="form-control" name="state" id="stateSelect">
              <option value="selectState">Select an option...</option>
              <option value="AL">Alabama</option>
              <option value="AK">Alaska</option>
              <option value="AZ">Arizona</option>
              <option value="AR">Arkansas</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DE">Delaware</option>
              <option value="DC">District Of Columbia</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="HI">Hawaii</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="IA">Iowa</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="ME">Maine</option>
              <option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MS">Mississippi</option>
              <option value="MO">Missouri</option>
              <option value="MT">Montana</option>
              <option value="NE">Nebraska</option>
              <option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NY">New York</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="PA">Pennsylvania</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="UT">Utah</option>
              <option value="VT">Vermont</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option>
              <option value="WY">Wyoming</option>
            </select>
            <label class="form-label" for="form7Example4">State</label>
          </div>
        </form>

	    </div>
    </div>
  </div>
</div>

      
      </div>
      <div class="col-md-4">
        <div class="card mb-4">
          <div class="card-header py-3">
            <h5 class="mb-0">Summary</h5>
          </div>
          <div class="card-body">
            <ul class="list-group list-group-flush">
              <li
                class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
                Products
                <span>$53.98</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                Shipping
                <span>Gratis</span>
              </li>
              <li
                class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
                <div>
                  <strong>Total amount</strong>
                  <strong>
                    <p class="mb-0">(including VAT)</p>
                  </strong>
                </div>
                <span><strong>$53.98</strong></span>
              </li>
            </ul>
              <div id="paypal-button-container"></div>

              <script>
                paypal.Buttons({

                  // onInit is called when the button first renders
                  onInit: function(data, actions) {
                       // Disable the buttons
                      actions.disable();

                      // Listen for changes to the checkbox
                      document.querySelector('#first-name')
                        .addEventListener('change', function(event) {

                          // Enable or disable the button when it is checked or unchecked
                          if (event.target.onchange) {
                            actions.enable();
                          } else {
                            actions.disable();
                          }
                        });
                  
                  },

                  // onClick is called when the button is clicked
                  onClick: function() {
                    const alerts = []
                    const alertintro = 'Please type your: '
                    if (!document.querySelector('#first-name').value)
                      alerts.push('First Name')
                    if (!document.querySelector('#last-name').value)
                      alerts.push('Last Name')
                    if (!document.querySelector('#street').value)
                      alerts.push('Street')
                    if (!document.querySelector('#city').value)
                      alerts.push('City')
                    if (document.querySelector('#stateSelect').value === "selectState")
                      alerts.push('State')
                    if (alerts.length > 0)
                      alert(alertintro + alerts)
                  },
                  createOrder: function(data, actions) {
                  var first_name = document.getElementById('first-name')
                  var last_name = document.getElementById('last-name')
                  var fullname = first_name.value + ' ' + last_name.value
                  var street = document.getElementById('street')
                  var city = document.getElementById('city')
                  var state = document.getElementById('stateSelect')
                  var zipcode = document.getElementById('zip')
                  // Set up the transaction
                  return actions.order.create({
                    purchase_units: [{
                      amount: {
                        value: ''
                      },
                      shipping: {
                        name: {
                          full_name: fullname
                        },
                        address: {
                          address_line_1: street.value,
                          admin_area_2: city.value,
                          admin_area_1: state.value,
                          postal_code: zipcode.value,
                          country_code: 'US'
                        }
                      },
                      payer: {
                        name: {
                          given_name: first_name.value,
                          surname: last_name.value
                        },
                        email_address: email.value,
                        address: {
                          address_line_1: street.value,
                          admin_area_2: city.value,
                          admin_area_1: state.value,
                          postal_code: zipcode.value,
                          country_code: 'US'
                        }
                      }
                    }]
                  });
                },
                onApprove: function(data, actions) {
                  // Capture the funds from the transaction
                  return actions.order.capture().then(function(details) {
                    // Show a success message to the buyer
                    alert('Transaction completed by ' + details.payer.name.given_name + '!');
                  });
                }
              }).render('#paypal-button-container')
              </script>
           
          </div>
        </div>
      </div>
    </div>
  </div>
</section>